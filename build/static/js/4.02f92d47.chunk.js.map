{"version":3,"sources":["request/http.js","request/api/content/home/home.js","assets/api/business.js","store/middleware/business.js","store/createAction/business.js","view/content/home/Home.js"],"names":["axios1","axios","create","getCommonDataOneH","params","url","Promise","resolve","reject","get","then","res","data","catch","err","message","error","getQuery","console","log","defaults","baseURL","timeout","headers","post","interceptors","request","use","config","token","localStorage","getItem","response","status","code","msg","removeItem","Mock","setup","mock","getCommonDataOneM","dispatch","getState","commonDataOne","result","type","types","Home","memo","useDispatch","useSelector","state","shallowEqual","useEffect"],"mappings":"4JAKMA,E,OAASC,EAAMC,SCHd,SAASC,EAAkBC,GAChC,OD2EK,SAAkBC,EAAKD,GAC5B,OAAO,IAAIE,SAAQ,SAACC,EAASC,GAC3BR,EAAOS,IAAIJ,EAAK,CACdD,WACCM,MAAK,SAAAC,GACNJ,EAAQI,EAAIC,SACXC,OAAM,WAAmB,IAAlBC,EAAiB,uDAAX,2BACdC,EAAA,EAAQC,MAAMF,GACdN,EAAOM,SCnFJG,CAAS,eAAgBb,GDShCc,QAAQC,IAAI,4BACZnB,EAAOoB,SAASC,QAAU,GAE5BrB,EAAOoB,SAASE,QAAU,IAC1BtB,EAAOoB,SAASG,QAAQC,KAAK,gBAAkB,sEAG/CxB,EAAOyB,aAAaC,QAAQC,KAC1B,SAAAC,GAGE,IAAMC,EAAQC,aAAaC,QAAQ,SAGnC,OADAF,IAAUD,EAAOL,QAAQM,MAAQA,GAC1BD,KAET,SAAAZ,GACE,OAAOV,QAAQU,MAAMA,MAIzBhB,EAAOyB,aAAaO,SAASL,KAC3B,SAACK,GAGC,GAFAd,QAAQC,IAAI,+DAAca,GAEF,MAApBA,EAASC,OACX,OAAQD,EAASpB,KAAKsB,MAEpB,KAAK,EACH,OAAO5B,QAAQC,QAAQyB,GAGzB,KAAK,IACH,OAAO1B,QAAQE,OAAOwB,EAASpB,KAAKuB,KAKtC,KAAK,IAIH,OAFAL,aAAaM,WAAW,SAEjB9B,QAAQE,OAAOwB,EAASpB,KAAKuB,KAGtC,QACE,GAAIH,EAASpB,KAAKsB,KAEhB,OAAO5B,QAAQE,OAAOwB,EAASpB,KAAKuB,SAM9C,SAACnB,GACC,GAAIA,EACF,OAAOV,QAAQE,OAAOQ,EAAMgB,a,sBEjElCK,IAAKC,MAAM,CACThB,QAAS,MAIXe,IAAKE,KAAK,qCAAqC,WAC7C,OAAOF,IAAKE,KAAK,CACf,KAAQ,EACR,IAAO,GACP,OAAU,qE,aCLP,IAAMC,EAAoB,SAACC,EAAUC,GAC1CvC,IAAoBO,MAAK,SAAAC,GCNpB,IAA2BgC,EDO9BF,GCP8BE,EDOHhC,EAAIiC,OCN1B,CACLC,KAAMC,IACNH,uB,OCCEI,EAAOC,gBAAK,WAEhB,IAAMP,EAAWQ,cAETN,EAAkBO,aAAY,SAACC,GACrC,MAAO,CACLR,cAAeQ,EAAM1C,IAAI,YAAYA,IAAI,qBAE1C2C,KAJKT,cAWR,OALAU,qBAAU,WACRZ,EAASD,KACR,CAACC,IAIF,8BACGE,OAKQI","file":"static/js/4.02f92d47.chunk.js","sourcesContent":["import axios from 'axios'\r\n\r\nimport { message } from 'antd';\r\n\r\n// 创建axios实例\r\nconst axios1 = axios.create()\r\n\r\n// 环境的切换\r\nif (process.env.NODE_ENV === 'development') {\r\n  console.log('开发模式')\r\n  axios1.defaults.baseURL = 'http://localhost:3001'\r\n} else if (process.env.NODE_ENV === 'production') {\r\n  console.log('生产模式')\r\n  axios1.defaults.baseURL = ''\r\n}\r\naxios1.defaults.timeout = 10000\r\naxios1.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8;multipart/form-data'\r\n\r\n// 请求拦截器\r\naxios1.interceptors.request.use(\r\n  config => {\r\n    // 每次发送请求之前判断是否存在token，如果存在，则统一在http请求的header都加上token，不用每次请求都手动添加了\r\n    // 即使本地存在token，也有可能token是过期的，所以在响应拦截器中要对返回状态进行判断\r\n    const token = localStorage.getItem('token')\r\n\r\n    token && (config.headers.token = token)\r\n    return config\r\n  },\r\n  error => {\r\n    return Promise.error(error)\r\n  })\r\n\r\n// 响应拦截器 code只是案例 具体code结合后端来定\r\naxios1.interceptors.response.use(\r\n  (response) => {\r\n    console.log('响应拦截器拦截的数据', response)\r\n    // 网络层200\r\n    if (response.status === 200) {\r\n      switch (response.data.code) {\r\n        // 成功\r\n        case 0:\r\n          return Promise.resolve(response)\r\n\r\n        // 账号或密码错误\r\n        case 500:\r\n          return Promise.reject(response.data.msg)\r\n\r\n        // 登录过期对用户进行提示\r\n        // 清除本地token\r\n        // 跳转登录页面\r\n        case 401:\r\n          // 清除token\r\n          localStorage.removeItem('token')\r\n          // 跳转登录页面，并将要浏览的页面fullPath传过去，登录成功后跳转需要访问的页面\r\n          return Promise.reject(response.data.msg)\r\n\r\n        // 其他非0状态\r\n        default:\r\n          if (response.data.code) {\r\n            // 其他错误\r\n            return Promise.reject(response.data.msg)\r\n          }\r\n      }\r\n    }\r\n  },\r\n  // 网络层状态码不是200的情况\r\n  (error) => {\r\n    if (error) {\r\n      return Promise.reject(error.response)\r\n    }\r\n  }\r\n)\r\n\r\n/**\r\n * get方法，对应get请求 query\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function getQuery(url, params) {\r\n  return new Promise((resolve, reject) => {\r\n    axios1.get(url, {\r\n      params\r\n    }).then(res => {\r\n      resolve(res.data)\r\n    }).catch((err = \"网络出错\") => {\r\n      message.error(err);\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\n/**\r\n * get方法，对应get请求 restful\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function getRestful(url, params) {\r\n  const {\r\n    id\r\n  } = params\r\n  return new Promise((resolve, reject) => {\r\n    axios1.get(`${url}${id}`).then(res => {\r\n      resolve(res.data)\r\n    }).catch((err = \"网络出错\") => {\r\n      message.error(err);\r\n      reject(err)\r\n    })\r\n  })\r\n}\r\n\r\n/**\r\n * post方法，对应post请求\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function post(url, params) {\r\n  return new Promise((resolve, reject) => {\r\n    axios1.post(url, params)\r\n      .then(res => {\r\n        resolve(res.data)\r\n      }).catch((err = \"网络出错\") => {\r\n        message.error(err);\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n/**\r\n * put方法，对应put请求\r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function put(url, params) {\r\n  return new Promise((resolve, reject) => {\r\n    axios1.put(url, params)\r\n      .then(res => {\r\n        resolve(res.data)\r\n      }).catch((err = \"网络出错\") => {\r\n        message.error(err);\r\n        reject(err)\r\n      })\r\n  })\r\n}\r\n\r\n/**\r\n * delete方法，对应delete请求 \r\n * @param {String} url [请求的url地址]\r\n * @param {Object} params [请求时携带的参数]\r\n */\r\nexport function remove(url, params) {\r\n  return new Promise((resolve, reject) => {\r\n    axios1.delete(url, {\r\n      params\r\n    }).then(res => {\r\n      resolve(res.data)\r\n    }).catch((err = \"网络出错\") => {\r\n      message.error(err);\r\n      reject(err)\r\n    })\r\n  })\r\n}","import { getQuery } from '@/request/http.js'\r\n\r\nexport function getCommonDataOneH(params) {\r\n  return getQuery('/commonData/', params)\r\n}","import Mock from 'mockjs';\r\n\r\n// 模拟延迟\r\nMock.setup({\r\n  timeout: 200\r\n})\r\n\r\n// 生成随机数据\r\nMock.mock('http://localhost:3001/commonData/', function () {\r\n  return Mock.mock({\r\n    'code': 0,\r\n    'msg': '',\r\n    'result': '我是公共的数据 哈哈哈'\r\n  })\r\n})","\r\nimport { getCommonDataOneH } from '@/request/api/content/home/home'\r\n\r\nimport '@/assets/api/business'; // 引入mock文件\r\n\r\nimport { getCommonDataOneA } from '../createAction/business'\r\n\r\nexport const getCommonDataOneM = (dispatch, getState) => {\r\n  getCommonDataOneH().then(res => {\r\n    dispatch(getCommonDataOneA(res.result))\r\n  })\r\n}\r\n","import * as types from '../const/business'\r\n\r\nexport function getCommonDataOneA(commonDataOne) {\r\n  return {\r\n    type: types.GET_COMMON_DATA_ONE,\r\n    commonDataOne\r\n  }\r\n}","import React, { memo, useEffect } from 'react';\r\n\r\nimport { shallowEqual, useSelector, useDispatch } from 'react-redux';\r\n\r\nimport { getCommonDataOneM } from '@/store/middleware/business'\r\n\r\nconst Home = memo(() => {\r\n\r\n  const dispatch = useDispatch()\r\n\r\n  const { commonDataOne } = useSelector((state) => {\r\n    return {\r\n      commonDataOne: state.get('business').get('commonDataOneR')\r\n    }\r\n  }, shallowEqual)\r\n\r\n  useEffect(() => {\r\n    dispatch(getCommonDataOneM)\r\n  }, [dispatch])\r\n\r\n\r\n  return (\r\n    <div>\r\n      {commonDataOne}\r\n    </div>\r\n  );\r\n});\r\n\r\nexport default Home;"],"sourceRoot":""}